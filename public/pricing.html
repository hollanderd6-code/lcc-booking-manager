<!DOCTYPE html>
<html lang="fr" data-theme="light" data-theme-v3="1">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Boostinghost – Choisissez votre plan</title>

  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&family=Instrument+Serif:ital@0;1&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="stylesheet" href="/css/style.css">

<script src="/js/auth-fetch.js"></script>
<style>
  .pricing-body {
    min-height: 100vh;
    background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
    font-family: 'Inter', sans-serif;
    padding: 40px 20px;
  }

  .pricing-container {
    max-width: 1200px;
    margin: 0 auto;
  }

  .pricing-header {
    text-align: center;
    margin-bottom: 60px;
  }

  .pricing-logo {
    display: inline-flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 24px;
  }

  .bh-logo {
    width: 50px;
    height: 50px;
  }

  .brand-boosting { color: #10B981; font-weight: 800; font-size: 24px; }
  .brand-host { color: #111827; font-weight: 700; font-size: 24px; }

  .pricing-header h1 {
    font-size: 48px;
    font-weight: 800;
    color: #111827;
    margin-bottom: 16px;
  }

  .pricing-header p {
    font-size: 18px;
    color: #6b7280;
  }

  .launch-banner {
    background: linear-gradient(135deg, #10b981, #059669);
    color: white;
    padding: 16px;
    border-radius: 16px;
    text-align: center;
    margin-bottom: 40px;
    font-weight: 600;
    box-shadow: 0 8px 30px rgba(16, 185, 129, 0.3);
  }

  .launch-banner i {
    font-size: 20px;
    margin-right: 8px;
  }

  .billing-toggle {
    display: flex;
    justify-content: center;
    gap: 16px;
    margin-bottom: 40px;
  }

  .billing-toggle button {
    padding: 12px 32px;
    border: 2px solid #e5e7eb;
    background: white;
    border-radius: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
  }

  .billing-toggle button.active {
    background: #10b981;
    color: white;
    border-color: #10b981;
  }

  .pricing-plans {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 32px;
    margin-bottom: 60px;
  }

  .pricing-card {
    background: white;
    border-radius: 20px;
    padding: 40px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    transition: transform 0.2s, box-shadow 0.2s;
    position: relative;
  }

  .pricing-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.12);
  }

  .pricing-card.featured {
    border: 3px solid #10b981;
    transform: scale(1.05);
  }

  .pricing-card.featured:hover {
    transform: scale(1.05) translateY(-8px);
  }

  .plan-badge {
    display: inline-block;
    padding: 6px 16px;
    background: #f3f4f6;
    color: #6b7280;
    border-radius: 20px;
    font-size: 13px;
    font-weight: 600;
    margin-bottom: 16px;
  }

  .featured .plan-badge {
    background: linear-gradient(135deg, #10b981, #059669);
    color: white;
  }

  .plan-name {
    font-size: 28px;
    font-weight: 800;
    color: #111827;
    margin-bottom: 16px;
  }

  .plan-price {
    margin-bottom: 8px;
  }

  .price-amount {
    font-size: 48px;
    font-weight: 800;
    color: #10b981;
  }

  .price-period {
    font-size: 18px;
    color: #6b7280;
  }

  .price-annual {
    font-size: 14px;
    color: #10b981;
    font-weight: 600;
    display: block;
    margin-top: 8px;
  }

  .plan-description {
    color: #6b7280;
    margin-bottom: 24px;
    font-size: 15px;
    line-height: 1.6;
  }

  .plan-features {
    list-style: none;
    padding: 0;
    margin-bottom: 32px;
  }

  .plan-features li {
    padding: 10px 0;
    color: #374151;
    font-size: 15px;
    display: flex;
    align-items: flex-start;
    gap: 12px;
  }

  .plan-features i.fa-check {
    color: #10b981;
    margin-top: 3px;
  }

  .btn-large {
    width: 100%;
    padding: 16px;
    font-size: 16px;
    font-weight: 700;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.2s;
    border: none;
  }

  .btn-primary {
    background: linear-gradient(135deg, #10b981, #059669);
    color: white;
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
  }

  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);
  }

  .btn-ghost {
    background: #f9fafb;
    color: #374151;
    border: 2px solid #e5e7eb;
  }

  .btn-ghost:hover {
    background: #f3f4f6;
  }

  .pricing-faq {
    max-width: 900px;
    margin: 0 auto 60px;
  }

  .pricing-faq h3 {
    text-align: center;
    font-size: 32px;
    font-weight: 800;
    margin-bottom: 40px;
    color: #111827;
  }

  .faq-grid {
    display: grid;
    gap: 24px;
  }

  .faq-item {
    background: white;
    padding: 24px;
    border-radius: 16px;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
    display: flex;
    gap: 20px;
  }

  .faq-icon {
    flex-shrink: 0;
    width: 48px;
    height: 48px;
    background: #f0fdf4;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #10b981;
    font-size: 24px;
  }

  .faq-item h4 {
    font-size: 18px;
    font-weight: 700;
    color: #111827;
    margin-bottom: 8px;
  }

  .faq-item p {
    color: #6b7280;
    line-height: 1.6;
  }

  .pricing-footer {
    text-align: center;
    padding-top: 40px;
    border-top: 1px solid #e5e7eb;
    color: #6b7280;
  }

  .pricing-footer a {
    color: #10b981;
    text-decoration: none;
    font-weight: 600;
  }

  .pricing-footer a:hover {
    text-decoration: underline;
  }

/* ============================================================
   PRICING PAGE — V3
   ============================================================ */
html[data-theme-v3="1"] body,
html[data-theme-v3="1"] .pricing-body {
  font-family: 'DM Sans', sans-serif !important;
  background: #F5F2EC !important;
  background-image: none !important;
}

/* Logo */
html[data-theme-v3="1"] .bh-logo { width: 52px !important; height: 52px !important; }
html[data-theme-v3="1"] .brand-boosting { color: #1A7A5E !important; }
html[data-theme-v3="1"] .brand-host { color: #0D1117 !important; }

/* Header */
html[data-theme-v3="1"] .pricing-header h1 {
  font-family: 'Instrument Serif', serif !important;
  color: #0D1117 !important;
}
html[data-theme-v3="1"] .pricing-header p {
  font-family: 'DM Sans', sans-serif !important;
  color: #7A8695 !important;
}

/* Launch banner */
html[data-theme-v3="1"] .launch-banner {
  background: #1A7A5E !important;
  background-image: none !important;
  box-shadow: 0 4px 20px rgba(26,122,94,.2) !important;
  border-radius: 14px !important;
}

/* Billing toggle */
html[data-theme-v3="1"] .billing-toggle button {
  font-family: 'DM Sans', sans-serif !important;
  font-weight: 600 !important;
  background: rgba(255,255,255,.6) !important;
  border: 1.5px solid rgba(13,17,23,.12) !important;
  border-radius: 10px !important;
}
html[data-theme-v3="1"] .billing-toggle button.active {
  background: #1A7A5E !important;
  border-color: #1A7A5E !important;
  color: white !important;
}

/* Pricing cards */
html[data-theme-v3="1"] .pricing-card {
  background: #F5F0E8 !important;
  border: 1px solid rgba(200,184,154,.4) !important;
  border-radius: 20px !important;
  box-shadow: none !important;
  transition: transform .2s, box-shadow .2s !important;
}
html[data-theme-v3="1"] .pricing-card:hover {
  transform: translateY(-4px) !important;
  box-shadow: 0 12px 32px rgba(13,17,23,.08) !important;
}
html[data-theme-v3="1"] .pricing-card.featured {
  border: 2px solid #1A7A5E !important;
  background: #EDE8DF !important;
}
html[data-theme-v3="1"] .pricing-card.featured:hover {
  transform: scale(1.05) translateY(-4px) !important;
}

/* Plan badge */
html[data-theme-v3="1"] .plan-badge {
  background: rgba(13,17,23,.06) !important;
  color: #7A8695 !important;
  border-radius: 999px !important;
}
html[data-theme-v3="1"] .featured .plan-badge {
  background: #1A7A5E !important;
  color: white !important;
}

/* Plan name & price */
html[data-theme-v3="1"] .plan-name {
  font-family: 'Instrument Serif', serif !important;
  color: #0D1117 !important;
}
html[data-theme-v3="1"] .price-amount { color: #1A7A5E !important; }
html[data-theme-v3="1"] .price-annual { color: #1A7A5E !important; }
html[data-theme-v3="1"] .plan-description { color: #7A8695 !important; }

/* Features list */
html[data-theme-v3="1"] .plan-features li { font-family: 'DM Sans', sans-serif !important; color: #374151 !important; }
html[data-theme-v3="1"] .plan-features i.fa-check { color: #1A7A5E !important; }

/* Buttons */
html[data-theme-v3="1"] .btn-large { font-family: 'DM Sans', sans-serif !important; border-radius: 12px !important; }
html[data-theme-v3="1"] .btn-primary {
  background: #1A7A5E !important;
  background-image: none !important;
  box-shadow: 0 4px 12px rgba(26,122,94,.25) !important;
}
html[data-theme-v3="1"] .btn-primary:hover {
  background: #15624B !important;
  transform: translateY(-1px) !important;
  box-shadow: 0 6px 16px rgba(26,122,94,.3) !important;
}
html[data-theme-v3="1"] .btn-ghost {
  background: rgba(255,255,255,.6) !important;
  border: 1.5px solid rgba(13,17,23,.12) !important;
  color: #374151 !important;
}
html[data-theme-v3="1"] .btn-ghost:hover {
  background: white !important;
}

/* FAQ */
html[data-theme-v3="1"] .pricing-faq h3 {
  font-family: 'Instrument Serif', serif !important;
  color: #0D1117 !important;
}
html[data-theme-v3="1"] .faq-item {
  background: #F5F0E8 !important;
  border: 1px solid rgba(200,184,154,.4) !important;
  border-radius: 12px !important;
}
html[data-theme-v3="1"] .faq-question {
  font-family: 'DM Sans', sans-serif !important;
  font-weight: 600 !important;
  color: #0D1117 !important;
}
html[data-theme-v3="1"] .faq-answer {
  font-family: 'DM Sans', sans-serif !important;
  color: #7A8695 !important;
}

/* Footer */
html[data-theme-v3="1"] .pricing-footer {
  font-family: 'DM Sans', sans-serif !important;
  color: #7A8695 !important;
}
html[data-theme-v3="1"] .pricing-footer a { color: #1A7A5E !important; }
</style>
</head>
<body class="pricing-body">
  <div class="pricing-container">
    <!-- Header -->
    <div class="pricing-header">
      <div class="pricing-logo">
        <img src="/asset/boostinghost-icon-circle.png" alt="Boostinghost" class="bh-logo">
        <div>
          <span class="brand-boosting">Boosting</span><span class="brand-host">host</span>
        </div>
      </div>
      <h1>Choisissez votre plan</h1>
      <p>14 jours d'essai gratuit • Sans carte bancaire • Annulez à tout moment</p>
    </div>

    <!-- Bannière offre de lancement -->
    <div class="launch-banner">
      <i class="fas fa-rocket"></i>
      Offre de lancement : Prix réduits pour les 200 premiers clients !
    </div>

    <!-- Toggle Mensuel/Annuel -->
    <div class="billing-toggle">
      <button class="active" onclick="showMonthly()">Mensuel</button>
      <button onclick="showAnnual()">Annuel <span style="background: #10b981; color: white; padding: 2px 8px; border-radius: 12px; margin-left: 8px; font-size: 12px;">-17%</span></button>
    </div>

    <!-- Plans -->
    <div class="pricing-plans">
      <!-- Plan Solo -->
      <div class="pricing-card">
        <div class="plan-badge">Idéal pour démarrer</div>
        <h2 class="plan-name">Solo</h2>
        <div class="plan-price">
          <span class="price-amount monthly-price">15€</span>
          <span class="price-amount annual-price" style="display:none;">149€</span>
          <span class="price-period monthly-period">/mois</span>
          <span class="price-period annual-period" style="display:none;">/an</span>
          <span class="price-annual annual-price" style="display:none;">soit 12,45€/mois (2 mois offerts)</span>
        </div>
        <p class="plan-description">
          <strong>1 logement inclus</strong><br>
          Pour les propriétaires avec 1 logement
        </p>

        <ul class="plan-features">
          <li><i class="fas fa-check"></i> Gestion du logement</li>
          <li><i class="fas fa-check"></i> Calendrier centralisé</li>
          <li><i class="fas fa-check"></i> Synchronisation iCal (Airbnb, Booking...)</li>
          <li><i class="fas fa-check"></i> Réservations manuelles</li>
          <li><i class="fas fa-check"></i> Paiements directs</li>
          <li><i class="fas fa-check"></i> Gestion des cautions</li>
          <li><i class="fas fa-check"></i> Messagerie instantanée interne</li>
          <li><i class="fas fa-check"></i> Gestion du ménage avec check-lists</li>
          <li><i class="fas fa-check"></i> Assignation des intervenants</li>
          <li><i class="fas fa-check"></i> Livret d'accueil digital</li>
          <li><i class="fas fa-check"></i> Application mobile iOS & Android</li>
          <li><i class="fas fa-check"></i> Factures automatiques pour voyageurs</li>
          <li><i class="fas fa-check"></i> Support standard</li>
        </ul>

        <button class="btn btn-ghost btn-large" onclick="startCheckout('solo', event)">
          Essayer gratuitement 14 jours
        </button>
      </div>

      <!-- Plan Standard (Featured) -->
      <div class="pricing-card featured">
        <div class="plan-badge">⭐ Recommandé</div>
        <h2 class="plan-name">Standard</h2>
        <div class="plan-price">
          <span class="price-amount monthly-price">29€</span>
          <span class="price-amount annual-price" style="display:none;">289€</span>
          <span class="price-period monthly-period">/mois</span>
          <span class="price-period annual-period" style="display:none;">/an</span>
          <span class="price-annual annual-price" style="display:none;">soit 24,09€/mois (2 mois offerts)</span>
        </div>
        <p class="plan-description">
          <strong>Jusqu'à 3 logements inclus</strong><br>
          +7€/logement supplémentaire<br>
          Pour gérer plusieurs logements simplement
        </p>

        <ul class="plan-features">
          <li><i class="fas fa-check"></i> Gestion multi-logements</li>
          <li><i class="fas fa-check"></i> Calendrier centralisé multi-plateformes</li>
          <li><i class="fas fa-check"></i> Synchronisation iCal avancée</li>
          <li><i class="fas fa-check"></i> Réservations manuelles</li>
          <li><i class="fas fa-check"></i> Paiements directs</li>
          <li><i class="fas fa-check"></i> Gestion des cautions</li>
          <li><i class="fas fa-check"></i> Messagerie instantanée interne</li>
          <li><i class="fas fa-check"></i> Gestion du ménage & check-lists</li>
          <li><i class="fas fa-check"></i> Assignation des équipes / intervenants</li>
          <li><i class="fas fa-check"></i> Livret d'accueil digital par logement</li>
          <li><i class="fas fa-check"></i> Application mobile iOS & Android</li>
          <li><i class="fas fa-check"></i> Factures automatiques pour voyageurs</li>
          <li><i class="fas fa-check"></i> Facturation (conciergerie → propriétaires)</li>
          <li><i class="fas fa-check"></i> Support standard</li>
        </ul>

        <button class="btn btn-primary btn-large" onclick="startCheckout('standard', event)">
          Essayer gratuitement 14 jours
        </button>
      </div>

      <!-- Plan Pro -->
      <div class="pricing-card">
        <div class="plan-badge">Pour conciergeries</div>
        <h2 class="plan-name">Pro</h2>
        <div class="plan-price">
          <span class="price-amount monthly-price">49€</span>
          <span class="price-amount annual-price" style="display:none;">489€</span>
          <span class="price-period monthly-period">/mois</span>
          <span class="price-period annual-period" style="display:none;">/an</span>
          <span class="price-annual annual-price" style="display:none;">soit 40,71€/mois (2 mois offerts)</span>
        </div>
        <p class="plan-description">
          <strong>Jusqu'à 6 logements inclus</strong><br>
          +5€/logement supplémentaire<br>
          Pour conciergeries & gestionnaires
        </p>

        <ul class="plan-features">
          <li><i class="fas fa-check"></i> Gestion multi-logements avancée</li>
          <li><i class="fas fa-check"></i> Calendrier détaillé par plateforme</li>
          <li><i class="fas fa-check"></i> Synchronisation iCal</li>
          <li><i class="fas fa-check"></i> Réservations manuelles</li>
          <li><i class="fas fa-check"></i> Paiements directs</li>
          <li><i class="fas fa-check"></i> Gestion des cautions</li>
          <li><i class="fas fa-check"></i> Messagerie instantanée interne</li>
          <li><i class="fas fa-check"></i> Gestion du ménage & check-lists avancées</li>
          <li><i class="fas fa-check"></i> Assignation des équipes & suivi</li>
          <li><i class="fas fa-check"></i> Livret d'accueil digital personnalisable</li>
          <li><i class="fas fa-check"></i> Application mobile iOS & Android</li>
          <li><i class="fas fa-check"></i> Factures automatiques pour voyageurs</li>
          <li><i class="fas fa-check"></i> Facturation conciergerie → propriétaires</li>
          <li><i class="fas fa-check"></i> <strong>Support prioritaire</strong></li>
        </ul>

        <button class="btn btn-ghost btn-large" onclick="startCheckout('pro', event)">
          Essayer gratuitement 14 jours
        </button>
      </div>
    </div>

    <!-- FAQ Section -->
    <div class="pricing-faq">
      <h3>Questions fréquentes</h3>
      <div class="faq-grid">
        <div class="faq-item">
          <div class="faq-icon"><i class="fas fa-question-circle"></i></div>
          <div>
            <h4>Comment fonctionne l'essai gratuit ?</h4>
            <p>Vous bénéficiez de 14 jours d'accès complet sans aucune carte bancaire requise. Vous pourrez ensuite choisir de continuer avec un abonnement.</p>
          </div>
        </div>

        <div class="faq-item">
          <div class="faq-icon"><i class="fas fa-home"></i></div>
          <div>
            <h4>Que se passe-t-il si j'ai plus de logements ?</h4>
            <p>Vous pouvez changer de plan à tout moment. Par exemple, si vous avez 1 logement, prenez Solo (15€/mois). Pour 2-3 logements, passez au plan Standard (29€/mois). Pour 4-6 logements, prenez le plan Pro (49€/mois). Au-delà, des frais par logement supplémentaire s'appliquent.</p>
          </div>
        </div>

        <div class="faq-item">
          <div class="faq-icon"><i class="fas fa-sync-alt"></i></div>
          <div>
            <h4>Puis-je changer de plan ?</h4>
            <p>Oui, vous pouvez changer de plan à tout moment. Le changement prend effet immédiatement et le montant est proratisé.</p>
          </div>
        </div>

        <div class="faq-item">
          <div class="faq-icon"><i class="fas fa-times-circle"></i></div>
          <div>
            <h4>Puis-je annuler mon abonnement ?</h4>
            <p>Oui, sans engagement. Vous pouvez annuler à tout moment depuis vos paramètres. Vous conservez l'accès jusqu'à la fin de la période payée.</p>
          </div>
        </div>

        <div class="faq-item">
          <div class="faq-icon"><i class="fas fa-building"></i></div>
          <div>
            <h4>Y a-t-il une différence entre propriétaire et conciergerie ?</h4>
            <p>Non ! Tous les plans incluent à la fois les fonctionnalités pour propriétaires et conciergeries. Choisissez simplement selon votre nombre de logements.</p>
          </div>
        </div>

        <div class="faq-item">
          <div class="faq-icon"><i class="fas fa-percent"></i></div>
          <div>
            <h4>Y a-t-il des frais supplémentaires ?</h4>
            <p>Non ! Tous les prix sont TTC, aucun frais caché. Les seuls frais additionnels sont ceux de Stripe pour les paiements de cautions (1,4% + 0,25€) et Igloohome pour les serrures (2$/serrure/mois).</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div class="pricing-footer">
      <p>Déjà un compte ? <a href="/login.html">Se connecter</a></p>
    </div>
  </div>

  <script>
  // Toggle Mensuel / Annuel
  function showMonthly() {
    document.querySelectorAll('.monthly-price, .monthly-period').forEach(el => el.style.display = '');
    document.querySelectorAll('.annual-price, .annual-period').forEach(el => el.style.display = 'none');
    document.querySelectorAll('.billing-toggle button')[0].classList.add('active');
    document.querySelectorAll('.billing-toggle button')[1].classList.remove('active');
  }

  function showAnnual() {
    document.querySelectorAll('.monthly-price, .monthly-period').forEach(el => el.style.display = 'none');
    document.querySelectorAll('.annual-price, .annual-period').forEach(el => el.style.display = '');
    document.querySelectorAll('.billing-toggle button')[0].classList.remove('active');
    document.querySelectorAll('.billing-toggle button')[1].classList.add('active');
  }

  // Démarrer le checkout
async function startCheckout(plan, event) {
    const token = localStorage.getItem('lcc_token');

    if (!token) {
      alert('Veuillez vous connecter pour souscrire à un abonnement.');
      window.location.href = '/login.html';
      return;
    }

    try {
      const button = event.target;
      button.disabled = true;
      button.textContent = 'Redirection vers Stripe...';

      // Déterminer si mensuel ou annuel
      const isAnnual = document.querySelectorAll('.billing-toggle button')[1].classList.contains('active');
      const billingPlan = isAnnual ? plan + '_annual' : plan + '_monthly';

      const res = await fetch('/api/billing/create-checkout-session', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': 'Bearer ' + token
        },
        body: JSON.stringify({ plan: billingPlan })
      });

      if (!res.ok) {
        throw new Error('Erreur lors de la création de la session');
      }

      const data = await res.json();

      if (data.url) {
        window.location.href = data.url;
      } else {
        throw new Error('URL de paiement non reçue');
      }

    } catch (err) {
      console.error('Erreur checkout:', err);
      alert('Impossible de démarrer le paiement. Réessayez plus tard.');
      
      const button = event.target;
      button.disabled = false;
      button.textContent = 'Essayer gratuitement 14 jours';
    }
  }

  // Adapter les boutons selon le statut
  async function checkUserStatus() {
    const token = localStorage.getItem('lcc_token');
    if (!token) return;

    try {
      const res = await fetch('/api/subscription/status', {
        headers: { 'Authorization': 'Bearer ' + token }
      });

      if (res.ok) {
        const data = await res.json();
        
        if (data.status === 'expired' || data.status === 'canceled' || 
            (data.status === 'trial' && data.daysRemaining < 0)) {
          
          document.querySelectorAll('button[onclick*="startCheckout"]').forEach(btn => {
            btn.textContent = 'S\'abonner maintenant';
          });
        }
      }
    } catch (err) {
      console.error('Erreur:', err);
    }
  }

  document.addEventListener('DOMContentLoaded', checkUserStatus);
</script>
</body>
</html>
