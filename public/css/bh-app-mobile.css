/* ================================================================
   BH-APP-MOBILE.CSS
   Fichier unique pour tout le responsive mobile de app.html
   Ce fichier remplace TOUS les blocs @media inline du fichier HTML
   ================================================================ */

@media (max-width: 768px) {

  /* ────────────────────────────────────────────────
     1. LAYOUT GÉNÉRAL
     ──────────────────────────────────────────────── */

  /* Pas de scroll horizontal sur la page */
  html, body {
    overflow-x: hidden !important;
  }

  /* La barre dark desktop est cachée */
  html[data-theme-v3="1"] .bh-demo-nav {
    display: none !important;
  }
  html[data-theme-v3="1"] body {
    padding-top: 0 !important;
  }

  /* Sidebar cachée — navigation via bottom bar */
  html[data-theme-v3="1"] .sidebar,
  html[data-theme-v3="1"] .sidebar-overlay {
    display: none !important;
  }

  /* Main content : pas de marge sidebar, espace pour mobile-header + bottom bar */
  html[data-theme-v3="1"] .main-content,
  html[data-theme-v3="1"] .app-content {
    margin-left: 0 !important;
    padding-top: 0 !important;
  }

  /* Page content : padding homogène + espace bottom bar */
  .page-content {
    padding: 14px 14px 90px !important;
  }


  /* ────────────────────────────────────────────────
     2. MOBILE HEADER (logo en haut, fixe)
     ──────────────────────────────────────────────── */

  html[data-theme-v3="1"] .mobile-header {
    display: flex !important;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    height: 60px !important;
    z-index: 1100 !important;
    align-items: center !important;
    justify-content: center !important;
    background: rgba(245, 242, 236, 0.97) !important;
    backdrop-filter: blur(12px) !important;
    -webkit-backdrop-filter: blur(12px) !important;
    border-bottom: 1px solid rgba(200, 184, 154, 0.4) !important;
    padding: 0 16px !important;
    box-shadow: 0 1px 8px rgba(13, 17, 23, 0.06) !important;
  }

  /* Compenser la hauteur du mobile-header */
  html[data-theme-v3="1"] .main-content,
  html[data-theme-v3="1"] .app-content {
    padding-top: 60px !important;
  }


  /* ────────────────────────────────────────────────
     3. HEADER DASHBOARD — compact, titre + sync
     ──────────────────────────────────────────────── */

  header.main-header,
  #bhMainHeader {
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    justify-content: space-between !important;
    padding: 12px 14px !important;
    margin-bottom: 14px !important;
    border-radius: 16px !important;
    min-height: 0 !important;
    gap: 12px !important;
    /* Pas de sticky sur mobile — le mobile-header gère le haut */
    position: static !important;
  }

  header.main-header .page-kicker,
  #bhMainHeader .page-kicker,
  header.main-header .page-subtitle,
  #bhMainHeader .page-subtitle {
    display: none !important;
  }

  header.main-header .header-left,
  #bhMainHeader .header-left {
    max-width: none !important;
    flex: 1 !important;
  }

  header.main-header .page-title,
  #bhMainHeader .page-title {
    font-size: 20px !important;
    font-weight: 700 !important;
    margin: 0 !important;
    line-height: 1 !important;
  }

  /* Bouton Nouvelle réservation : caché sur mobile */
  #newReservationBtn {
    display: none !important;
  }

  /* Boutons header : taille réduite */
  .header-actions .btn-icon,
  .header-actions .theme-toggle {
    width: 38px !important;
    height: 38px !important;
  }


  /* ────────────────────────────────────────────────
     4. ÉLÉMENTS CACHÉS SUR MOBILE
     ──────────────────────────────────────────────── */

  .status-grid,
  .onboarding-section,
  .overview-card,
  #calendarFiltersSection,
  #upcomingSection,
  .ai-section,
  .email-messaging-section,
  .cleaning-messages-section {
    display: none !important;
  }


  /* ────────────────────────────────────────────────
     5. KPI GRID — 1 colonne, layout horizontal
     ──────────────────────────────────────────────── */

  .kpi-grid {
    display: flex !important;
    flex-direction: column !important;
    gap: 10px !important;
    margin: 0 0 16px !important;
    padding: 0 !important;
    width: 100% !important;
  }

  .kpi-card {
    width: 100% !important;
    min-width: 0 !important;
    padding: 16px 20px !important;
    border-radius: 16px !important;
    /* Layout : label à gauche, valeur à droite */
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    justify-content: space-between !important;
    gap: 16px !important;
  }

  /* Bloc gauche : label + pill */
  .kpi-card .kpi-header {
    flex: 1 !important;
    display: flex !important;
    flex-direction: column !important;
    align-items: flex-start !important;
    gap: 4px !important;
    margin-bottom: 0 !important;
  }

  .kpi-card .kpi-label {
    font-size: 14px !important;
    font-weight: 600 !important;
    line-height: 1.3 !important;
    color: var(--text-primary) !important;
  }

  .kpi-card .kpi-pill {
    font-size: 11px !important;
    padding: 2px 8px !important;
  }

  /* Bloc droit : valeur + sous-texte */
  .kpi-card .kpi-main {
    display: flex !important;
    flex-direction: column !important;
    align-items: flex-end !important;
    gap: 2px !important;
    flex-shrink: 0 !important;
  }

  .kpi-card .kpi-value {
    font-size: 42px !important;
    line-height: 1 !important;
    font-weight: 700 !important;
    color: #1A7A5E !important;
    letter-spacing: -0.02em !important;
  }

  .kpi-card .kpi-sub {
    font-size: 12px !important;
    line-height: 1.3 !important;
    text-align: right !important;
    color: var(--text-secondary) !important;
    max-width: 160px !important;
  }


  /* ────────────────────────────────────────────────
     6. CHECKLISTS WIDGET
     ──────────────────────────────────────────────── */

  .cleaning-checklists-widget {
    padding: 16px !important;
  }

  .checklists-grid {
    grid-template-columns: 1fr !important;
  }


  /* ────────────────────────────────────────────────
     7. CALENDRIER — propre et centré
     ──────────────────────────────────────────────── */

  /* La section calendrier : supprimer padding de .card */
  #calendarSection {
    display: block !important;
    padding: 0 !important;
    border-radius: 16px !important;
    overflow: hidden !important;
  }

  /* Section header vide : caché */
  #calendarSection .section-header {
    display: none !important;
  }

  /* Header noir avec titre/légendes/tabs : caché sur mobile */
  #calendarSection .calendar-modern-header {
    display: none !important;
  }

  /* View selector : caché */
  .view-selector {
    display: none !important;
  }

  /* Navigation mois : centrée */
  .period-navigation {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    padding: 12px 16px !important;
    background: #F5F2EC !important;
    border-bottom: 1px solid rgba(0, 0, 0, 0.08) !important;
  }

  .period-display {
    flex: 1 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 8px !important;
    text-align: center !important;
  }

  .period-nav-btn {
    flex-shrink: 0 !important;
    width: 36px !important;
    height: 36px !important;
    background: rgba(255,255,255,0.8) !important;
    border: 1px solid rgba(200, 184, 154, 0.5) !important;
    color: #1A7A5E !important;
    border-radius: 10px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
  }

  /* Colonne logements : compacte */
  .property-list-column {
    width: 110px !important;
    min-width: 110px !important;
    flex-shrink: 0 !important;
  }

  .property-item {
    font-size: 11px !important;
    padding: 4px 8px !important;
  }

  /* Conteneur calendrier : scroll horizontal sur la grille seulement */
  .calendar-container {
    overflow-x: hidden !important;
    overflow-y: visible !important;
    display: flex !important;
    width: 100% !important;
  }

  .calendar-container .calendar-grid-wrapper {
    flex: 1 1 auto !important;
    display: flex !important;
    flex-direction: column !important;
    overflow-x: auto !important;
    overflow-y: visible !important;
    -webkit-overflow-scrolling: touch !important;
  }

  .calendar-container .calendar-grid,
  .calendar-container .property-list-items {
    overflow-y: visible !important;
  }

  .calendar-container .days-header {
    overflow-x: visible !important;
    width: auto !important;
    min-width: max-content !important;
  }

  /* Colonnes de jours : largeur fixe */
  .calendar-container .days-header .day-header,
  .calendar-container .calendar-grid .calendar-cell {
    flex: 0 0 48px !important;
    min-width: 48px !important;
  }

  /* Texte des tabs de vue : caché pour gagner de la place */
  .view-tab span {
    display: none !important;
  }


  /* ────────────────────────────────────────────────
     8. BOTTOM BAR
     ──────────────────────────────────────────────── */

  html[data-theme-v3="1"] .mobile-tabs {
    background: rgba(245, 242, 236, 0.97) !important;
    backdrop-filter: blur(16px) !important;
    -webkit-backdrop-filter: blur(16px) !important;
    border-top: 1px solid rgba(200, 184, 154, 0.4) !important;
    box-shadow: 0 -2px 12px rgba(13, 17, 23, 0.06) !important;
  }

  html[data-theme-v3="1"] .mobile-tabs .tab-btn {
    color: #A0AABA !important;
  }

  html[data-theme-v3="1"] .mobile-tabs .tab-btn.active {
    color: #1A7A5E !important;
  }


  /* ────────────────────────────────────────────────
     9. FAB (bouton + flottant)
     ──────────────────────────────────────────────── */

  .fab-add-resa,
  .fab-btn,
  .btn-fab {
    background: #1A7A5E !important;
    box-shadow: 0 4px 16px rgba(26, 122, 94, 0.35) !important;
    bottom: calc(76px + env(safe-area-inset-bottom)) !important;
  }


  /* ────────────────────────────────────────────────
     10. MODALS & DIVERS
     ──────────────────────────────────────────────── */

  .checklist-modal {
    max-height: 95vh !important;
    margin: 0 !important;
  }

  .hide-on-mobile {
    display: none !important;
  }

  /* Formulaires en colonne */
  .form-row,
  .form-row-two {
    flex-direction: column !important;
    gap: 12px !important;
  }

}


/* ────────────────────────────────────────────────
   DESKTOP : cacher les éléments mobile-only
──────────────────────────────────────────────── */

@media (min-width: 769px) {
  .mobile-header,
  .mobile-tabs,
  .mobile-menu-btn {
    display: none !important;
  }
}
