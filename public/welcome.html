<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Créateur de Livret d'Accueil – LCC</title>
  
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Cormorant+Garamond:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary: #10B981;
      --primary-dark: #059669;
      --secondary: #3B82F6;
      --accent: #E67E50;
      --dark: #111827;
      --gray-50: #F9FAFB;
      --gray-100: #F3F4F6;
      --gray-200: #E5E7EB;
      --gray-300: #D1D5DB;
      --gray-400: #9CA3AF;
      --gray-500: #6B7280;
      --gray-600: #4B5563;
      --gray-700: #374151;
      --gray-800: #1F2937;
      --gray-900: #111827;
      --white: #FFFFFF;
      --success: #10B981;
      --warning: #F59E0B;
      --danger: #EF4444;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: var(--gray-50);
      color: var(--gray-900);
      line-height: 1.6;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
    }

    /* Header */
    .header {
      background: var(--white);
      padding: 1.5rem 2rem;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      margin-bottom: 2rem;
    }

    .header-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .logo-icon {
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.2rem;
    }

    .logo-text {
      font-size: 1.25rem;
      font-weight: 700;
    }

    .logo-text .green {
      color: var(--primary);
    }

    .logo-text .dark {
      color: var(--gray-900);
    }

    .header-actions {
      display: flex;
      gap: 1rem;
    }

    /* Page Title */
    .page-title {
      margin-bottom: 2rem;
    }

    .page-title h1 {
      font-size: 2rem;
      font-weight: 700;
      color: var(--gray-900);
      margin-bottom: 0.5rem;
    }

    .page-title p {
      font-size: 1rem;
      color: var(--gray-500);
    }

    /* Progress Steps */
    .progress-steps {
      background: var(--white);
      padding: 2rem;
      border-radius: 12px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      margin-bottom: 2rem;
    }

    .steps-container {
      display: flex;
      justify-content: space-between;
      position: relative;
    }

    .steps-container::before {
      content: '';
      position: absolute;
      top: 20px;
      left: 0;
      right: 0;
      height: 2px;
      background: var(--gray-200);
      z-index: 0;
    }

    .step {
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      z-index: 1;
      flex: 1;
    }

    .step-number {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--gray-200);
      color: var(--gray-500);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      margin-bottom: 0.5rem;
      transition: all 0.3s ease;
    }

    .step.active .step-number {
      background: var(--primary);
      color: white;
    }

    .step.completed .step-number {
      background: var(--success);
      color: white;
    }

    .step-label {
      font-size: 0.875rem;
      color: var(--gray-500);
      text-align: center;
      font-weight: 500;
    }

    .step.active .step-label {
      color: var(--primary);
      font-weight: 600;
    }

    /* Form Card */
    .form-card {
      background: var(--white);
      border-radius: 12px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      padding: 2rem;
      margin-bottom: 2rem;
    }

    .form-section {
      display: none;
    }

    .form-section.active {
      display: block;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .section-header {
      margin-bottom: 2rem;
      padding-bottom: 1rem;
      border-bottom: 2px solid var(--gray-100);
    }

    .section-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--gray-900);
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .section-title i {
      color: var(--accent);
    }

    .section-description {
      font-size: 0.95rem;
      color: var(--gray-500);
    }

    /* Form Elements */
    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-group label {
      display: block;
      font-size: 0.875rem;
      font-weight: 600;
      color: var(--gray-700);
      margin-bottom: 0.5rem;
    }

    .form-group label .required {
      color: var(--danger);
    }

    .form-group .hint {
      font-size: 0.8rem;
      color: var(--gray-500);
      font-weight: 400;
      display: block;
      margin-top: 0.25rem;
    }

    .form-control {
      width: 100%;
      padding: 0.75rem;
      border: 1px solid var(--gray-300);
      border-radius: 8px;
      font-size: 0.95rem;
      transition: all 0.3s ease;
      font-family: 'Inter', sans-serif;
    }

    .form-control:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
    }

    textarea.form-control {
      resize: vertical;
      min-height: 100px;
    }

    /* Grid Layout */
    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
    }

    /* Image Upload */
    .image-upload-area {
      border: 2px dashed var(--gray-300);
      border-radius: 8px;
      padding: 2rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      background: var(--gray-50);
    }

    .image-upload-area:hover {
      border-color: var(--primary);
      background: rgba(16, 185, 129, 0.05);
    }

    .image-upload-area i {
      font-size: 3rem;
      color: var(--gray-400);
      margin-bottom: 1rem;
    }

    .image-upload-area p {
      color: var(--gray-600);
      margin-bottom: 0.5rem;
    }

    .image-upload-area .supported-formats {
      font-size: 0.8rem;
      color: var(--gray-400);
    }

    .image-preview {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 1rem;
      margin-top: 1rem;
    }

    .image-preview-item {
      position: relative;
      aspect-ratio: 4/3;
      border-radius: 8px;
      overflow: hidden;
      border: 2px solid var(--gray-200);
    }

    .image-preview-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .image-preview-item .remove-btn {
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: rgba(239, 68, 68, 0.9);
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .image-preview-item .remove-btn:hover {
      background: var(--danger);
      transform: scale(1.1);
    }

    /* Repeatable Items */
    .repeatable-section {
      margin-bottom: 2rem;
    }

    .repeatable-item {
      background: var(--gray-50);
      padding: 1.5rem;
      border-radius: 8px;
      margin-bottom: 1rem;
      position: relative;
      border: 1px solid var(--gray-200);
    }

    .repeatable-item-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      padding-bottom: 0.75rem;
      border-bottom: 1px solid var(--gray-200);
    }

    .repeatable-item-title {
      font-weight: 600;
      color: var(--gray-700);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .remove-item-btn {
      background: transparent;
      border: none;
      color: var(--danger);
      cursor: pointer;
      padding: 0.5rem;
      border-radius: 6px;
      transition: all 0.3s ease;
    }

    .remove-item-btn:hover {
      background: rgba(239, 68, 68, 0.1);
    }

    .add-item-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1.5rem;
      background: var(--gray-100);
      color: var(--gray-700);
      border: 1px dashed var(--gray-300);
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.3s ease;
      margin-top: 1rem;
    }

    .add-item-btn:hover {
      background: var(--gray-200);
      border-color: var(--gray-400);
    }

    /* Buttons */
    .btn {
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 8px;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    .btn-primary {
      background: var(--primary);
      color: white;
    }

    .btn-primary:hover {
      background: var(--primary-dark);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
    }

    .btn-secondary {
      background: var(--gray-200);
      color: var(--gray-700);
    }

    .btn-secondary:hover {
      background: var(--gray-300);
    }

    .btn-accent {
      background: var(--accent);
      color: white;
    }

    .btn-accent:hover {
      background: #d46d42;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(230, 126, 80, 0.3);
    }

    .form-actions {
      display: flex;
      justify-content: space-between;
      gap: 1rem;
      margin-top: 2rem;
      padding-top: 2rem;
      border-top: 2px solid var(--gray-100);
    }

    /* Info Box */
    .info-box {
      background: rgba(16, 185, 129, 0.1);
      border-left: 4px solid var(--primary);
      padding: 1rem 1.25rem;
      border-radius: 8px;
      margin-bottom: 1.5rem;
    }

    .info-box i {
      color: var(--primary);
      margin-right: 0.5rem;
    }

    .info-box p {
      color: var(--gray-700);
      font-size: 0.9rem;
    }

    /* Warning Box */
    .warning-box {
      background: rgba(245, 158, 11, 0.1);
      border-left: 4px solid var(--warning);
      padding: 1rem 1.25rem;
      border-radius: 8px;
      margin-bottom: 1.5rem;
    }

    .warning-box i {
      color: var(--warning);
      margin-right: 0.5rem;
    }

    /* Success Message */
    .success-message {
      display: none;
      background: var(--white);
      border-radius: 12px;
      padding: 3rem;
      text-align: center;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .success-message.show {
      display: block;
      animation: fadeIn 0.5s ease;
    }

    .success-icon {
      width: 80px;
      height: 80px;
      background: var(--success);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1.5rem;
      color: white;
      font-size: 2.5rem;
    }

    .success-message h2 {
      font-size: 1.75rem;
      color: var(--gray-900);
      margin-bottom: 0.75rem;
    }

    .success-message p {
      color: var(--gray-600);
      margin-bottom: 2rem;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .container {
        padding: 1rem;
      }

      .form-card {
        padding: 1.5rem;
      }

      .form-grid {
        grid-template-columns: 1fr;
      }

      .steps-container {
        flex-wrap: wrap;
        gap: 1rem;
      }

      .step {
        flex-basis: 45%;
      }

      .form-actions {
        flex-direction: column;
      }

      .page-title h1 {
        font-size: 1.5rem;
      }
    }

    /* Loading Spinner */
    .spinner {
      border: 3px solid var(--gray-200);
      border-top: 3px solid var(--primary);
      border-radius: 50%;
      width: 20px;
      height: 20px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <div class="logo">
        <div class="logo-icon">
          <i class="fas fa-book-open"></i>
        </div>
        <div class="logo-text">
          <span class="green">Boosting</span>
          <span class="dark">Host</span>
        </div>
      </div>
      <div class="header-actions">
        <button class="btn btn-secondary" onclick="window.location.href='/app.html'">
          <i class="fas fa-arrow-left"></i>
          Retour au dashboard
        </button>
      </div>
    </div>
  </header>

  <div class="container">
    <!-- Page Title -->
    <div class="page-title">
      <h1>Créer un Livret d'Accueil</h1>
      <p>Créez un livret d'accueil personnalisé et professionnel pour vos voyageurs</p>
    </div>

    <!-- Progress Steps -->
    <div class="progress-steps">
      <div class="steps-container">
        <div class="step active" data-step="1">
          <div class="step-number">1</div>
          <div class="step-label">Informations<br>générales</div>
        </div>
        <div class="step" data-step="2">
          <div class="step-number">2</div>
          <div class="step-label">Accès &<br>Arrivée</div>
        </div>
        <div class="step" data-step="3">
          <div class="step-number">3</div>
          <div class="step-label">Le<br>Logement</div>
        </div>
        <div class="step" data-step="4">
          <div class="step-number">4</div>
          <div class="step-label">Informations<br>pratiques</div>
        </div>
        <div class="step" data-step="5">
          <div class="step-number">5</div>
          <div class="step-label">Aux<br>Alentours</div>
        </div>
      </div>
    </div>

    <!-- Form -->
    <form id="welcomeForm">
      <!-- Section 1: Informations Générales -->
      <div class="form-section active" data-section="1">
        <div class="form-card">
          <div class="section-header">
            <h2 class="section-title">
              <i class="fas fa-home"></i>
              Informations Générales
            </h2>
            <p class="section-description">
              Commencez par les informations de base de votre logement
            </p>
          </div>

          <div class="info-box">
            <p><i class="fas fa-info-circle"></i> Ces informations apparaîtront sur la page d'accueil de votre livret</p>
          </div>

          <div class="form-group">
            <label>
              Nom du logement <span class="required">*</span>
              <span class="hint">Ex: "Votre Pied-à-Terre ", "Appartement Cosy Centre-Ville"</span>
            </label>
            <input type="text" class="form-control" name="propertyName" required placeholder="Nom de votre logement">
          </div>

          <div class="form-group">
            <label>
              Photo de couverture <span class="required">*</span>
              <span class="hint">Image principale qui apparaîtra en haut du livret (format recommandé: 1920x1080px)</span>
            </label>
            <div class="image-upload-area" onclick="document.getElementById('coverPhoto').click()">
              <i class="fas fa-cloud-upload-alt"></i>
              <p>Cliquez pour télécharger votre photo de couverture</p>
              <p class="supported-formats">JPG, PNG ou WebP (max 5MB)</p>
            </div>
            <input type="file" id="coverPhoto" accept="image/*" style="display: none;">
            <div class="image-preview" id="coverPhotoPreview"></div>
          </div>

          <div class="form-group">
            <label>
              Description d'accueil
              <span class="hint">Message de bienvenue pour vos voyageurs</span>
            </label>
            <textarea class="form-control" name="welcomeDescription" rows="3" placeholder="Ex: Nous sommes ravis de vous accueillir dans cet appartement. Ce livret contient toutes les informations pour profiter pleinement de votre séjour."></textarea>
          </div>

          <div class="form-group">
            <label>
              Votre numéro de téléphone <span class="required">*</span>
              <span class="hint">Pour que vos voyageurs puissent vous contacter</span>
            </label>
            <input type="tel" class="form-control" name="contactPhone" required placeholder="06 XX XX XX XX">
          </div>
        </div>

        <div class="form-actions">
          <div></div>
          <button type="button" class="btn btn-primary" onclick="nextSection()">
            Suivant
            <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </div>

      <!-- Section 2: Accès & Arrivée -->
      <div class="form-section" data-section="2">
        <div class="form-card">
          <div class="section-header">
            <h2 class="section-title">
              <i class="fas fa-map-marker-alt"></i>
              Accès & Arrivée
            </h2>
            <p class="section-description">
              Comment vos voyageurs accèdent-ils à votre logement ?
            </p>
          </div>

          <div class="form-grid">
            <div class="form-group">
              <label>
                Adresse complète <span class="required">*</span>
              </label>
              <input type="text" class="form-control" name="address" required placeholder="Numéro et rue">
            </div>

            <div class="form-group">
              <label>
                Code postal <span class="required">*</span>
              </label>
              <input type="text" class="form-control" name="postalCode" required placeholder="75001">
            </div>
          </div>

          <div class="form-grid">
            <div class="form-group">
              <label>
                Ville <span class="required">*</span>
              </label>
              <input type="text" class="form-control" name="city" required placeholder="Paris">
            </div>

            <div class="form-group">
              <label>
                Code de la boîte à clés
                <span class="hint">Si applicable</span>
              </label>
              <input type="text" class="form-control" name="keyboxCode" placeholder="Ex: 8670">
            </div>
          </div>

          <div class="form-group">
            <label>
              Instructions d'accès
              <span class="hint">Expliquez comment accéder au logement (portail, étage, etc.)</span>
            </label>
            <textarea class="form-control" name="accessInstructions" rows="4" placeholder="Ex: Poussez le portail, la boîte à clés est à gauche au niveau de la flèche rouge..."></textarea>
          </div>

          <div class="form-group">
            <label>
              Photos de l'entrée
              <span class="hint">Photos du portail, de l'entrée, de la boîte à clés, etc.</span>
            </label>
            <div class="image-upload-area" onclick="document.getElementById('entrancePhotos').click()">
              <i class="fas fa-images"></i>
              <p>Cliquez pour télécharger les photos de l'entrée</p>
              <p class="supported-formats">Vous pouvez sélectionner plusieurs images</p>
            </div>
            <input type="file" id="entrancePhotos" accept="image/*" multiple style="display: none;">
            <div class="image-preview" id="entrancePhotosPreview"></div>
          </div>

          <div class="form-group">
            <label>
              Parking
              <span class="hint">Informations sur le stationnement</span>
            </label>
            <textarea class="form-control" name="parkingInfo" rows="3" placeholder="Ex: Parking gratuit au 43-51 rue du Marché, 230 places sur 3 niveaux"></textarea>
          </div>

          <div class="form-group">
            <label>
              Photos du parking
              <span class="hint">Si applicable</span>
            </label>
            <div class="image-upload-area" onclick="document.getElementById('parkingPhotos').click()">
              <i class="fas fa-parking"></i>
              <p>Cliquez pour télécharger les photos du parking</p>
            </div>
            <input type="file" id="parkingPhotos" accept="image/*" multiple style="display: none;">
            <div class="image-preview" id="parkingPhotosPreview"></div>
          </div>
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-secondary" onclick="prevSection()">
            <i class="fas fa-arrow-left"></i>
            Précédent
          </button>
          <button type="button" class="btn btn-primary" onclick="nextSection()">
            Suivant
            <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </div>

      <!-- Section 3: Le Logement -->
      <div class="form-section" data-section="3">
        <div class="form-card">
          <div class="section-header">
            <h2 class="section-title">
              <i class="fas fa-door-open"></i>
              Le Logement
            </h2>
            <p class="section-description">
              Présentez les différentes pièces et espaces de votre logement
            </p>
          </div>

          <div class="warning-box">
            <p><i class="fas fa-lightbulb"></i> Ajoutez autant de pièces que nécessaire pour présenter votre logement</p>
          </div>

          <div id="roomsContainer" class="repeatable-section">
            <!-- Les pièces seront ajoutées ici dynamiquement -->
          </div>

          <button type="button" class="add-item-btn" onclick="addRoom()">
            <i class="fas fa-plus-circle"></i>
            Ajouter une pièce / un espace
          </button>
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-secondary" onclick="prevSection()">
            <i class="fas fa-arrow-left"></i>
            Précédent
          </button>
          <button type="button" class="btn btn-primary" onclick="nextSection()">
            Suivant
            <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </div>

      <!-- Section 4: Informations Pratiques -->
      <div class="form-section" data-section="4">
        <div class="form-card">
          <div class="section-header">
            <h2 class="section-title">
              <i class="fas fa-info-circle"></i>
              Informations Pratiques
            </h2>
            <p class="section-description">
              WiFi, équipements, consignes et tout ce qui est utile au quotidien
            </p>
          </div>

          <h3 style="margin-bottom: 1rem; color: var(--gray-700);">
            <i class="fas fa-wifi" style="color: var(--accent);"></i> WiFi
          </h3>

          <div class="form-grid">
            <div class="form-group">
              <label>Nom du réseau WiFi (SSID)</label>
              <input type="text" class="form-control" name="wifiSSID" placeholder="Nom du réseau">
            </div>

            <div class="form-group">
              <label>Mot de passe WiFi</label>
              <input type="text" class="form-control" name="wifiPassword" placeholder="Mot de passe">
            </div>
          </div>

          <hr style="margin: 2rem 0; border: none; border-top: 1px solid var(--gray-200);">

          <h3 style="margin-bottom: 1rem; color: var(--gray-700);">
            <i class="fas fa-clipboard-list" style="color: var(--accent);"></i> Consignes de départ
          </h3>

          <div class="form-group">
            <label>
              Heure de départ
              <span class="hint">Ex: 11h, 10h30</span>
            </label>
            <input type="text" class="form-control" name="checkoutTime" placeholder="11h">
          </div>

          <div class="form-group">
            <label>
              Instructions de départ
              <span class="hint">Ce que les voyageurs doivent faire avant de partir</span>
            </label>
            <textarea class="form-control" name="checkoutInstructions" rows="5" placeholder="Ex:&#10;- Éteindre toutes les lumières&#10;- Laver la vaisselle&#10;- Poser les serviettes au sol..."></textarea>
          </div>

          <hr style="margin: 2rem 0; border: none; border-top: 1px solid var(--gray-200);">

          <h3 style="margin-bottom: 1rem; color: var(--gray-700);">
            <i class="fas fa-toolbox" style="color: var(--accent);"></i> Équipements disponibles
          </h3>

          <div class="form-group">
            <label>
              Liste des équipements
              <span class="hint">Un équipement par ligne</span>
            </label>
            <textarea class="form-control" name="equipmentList" rows="8" placeholder="Ex:&#10;Machine à café Nespresso&#10;Micro-ondes&#10;Machine à laver&#10;Fer et planche à repasser..."></textarea>
          </div>

          <hr style="margin: 2rem 0; border: none; border-top: 1px solid var(--gray-200);">

          <h3 style="margin-bottom: 1rem; color: var(--gray-700);">
            <i class="fas fa-exclamation-triangle" style="color: var(--warning);"></i> Règles importantes
          </h3>

          <div class="form-group">
            <label>
              Règles et avertissements
              <span class="hint">Ex: Poutre basse, logement non-fumeur, attention aux marches...</span>
            </label>
            <textarea class="form-control" name="importantRules" rows="4" placeholder="Entrez les règles importantes..."></textarea>
          </div>

          <hr style="margin: 2rem 0; border: none; border-top: 1px solid var(--gray-200);">

          <h3 style="margin-bottom: 1rem; color: var(--gray-700);">
            <i class="fas fa-train" style="color: var(--accent);"></i> Transports
          </h3>

          <div class="form-group">
            <label>
              Informations sur les transports
              <span class="hint">Comment accéder aux transports en commun, gares, etc.</span>
            </label>
            <textarea class="form-control" name="transportInfo" rows="6" placeholder="Ex: Bus ligne 15 à 1 minute à pied..."></textarea>
          </div>
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-secondary" onclick="prevSection()">
            <i class="fas fa-arrow-left"></i>
            Précédent
          </button>
          <button type="button" class="btn btn-primary" onclick="nextSection()">
            Suivant
            <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </div>

      <!-- Section 5: Aux Alentours -->
      <div class="form-section" data-section="5">
        <div class="form-card">
          <div class="section-header">
            <h2 class="section-title">
              <i class="fas fa-map-marked-alt"></i>
              Aux Alentours
            </h2>
            <p class="section-description">
              Recommandations de restaurants, commerces et lieux à visiter
            </p>
          </div>

          <h3 style="margin-bottom: 1rem; color: var(--gray-700);">
            <i class="fas fa-utensils" style="color: var(--accent);"></i> Restaurants & Bars
          </h3>

          <div id="restaurantsContainer" class="repeatable-section">
            <!-- Les restaurants seront ajoutés ici dynamiquement -->
          </div>

          <button type="button" class="add-item-btn" onclick="addRestaurant()">
            <i class="fas fa-plus-circle"></i>
            Ajouter un restaurant / bar
          </button>

          <hr style="margin: 2rem 0; border: none; border-top: 1px solid var(--gray-200);">

          <h3 style="margin-bottom: 1rem; color: var(--gray-700);">
            <i class="fas fa-shopping-bag" style="color: var(--accent);"></i> Commerces
          </h3>

          <div class="form-group">
            <label>
              Liste des commerces
              <span class="hint">Supermarchés, boulangeries, pharmacies, etc. (un par ligne)</span>
            </label>
            <textarea class="form-control" name="shopsList" rows="6" placeholder="Ex:&#10;FRANPRIX - 6 rue de Pontoise&#10;Boulangerie LA POTERNE - Place du marché..."></textarea>
          </div>

          <hr style="margin: 2rem 0; border: none; border-top: 1px solid var(--gray-200);">

          <h3 style="margin-bottom: 1rem; color: var(--gray-700);">
            <i class="fas fa-map-signs" style="color: var(--accent);"></i> Lieux à Visiter
          </h3>

          <div id="placesContainer" class="repeatable-section">
            <!-- Les lieux seront ajoutés ici dynamiquement -->
          </div>

          <button type="button" class="add-item-btn" onclick="addPlace()">
            <i class="fas fa-plus-circle"></i>
            Ajouter un lieu à visiter
          </button>
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-secondary" onclick="prevSection()">
            <i class="fas fa-arrow-left"></i>
            Précédent
          </button>
          <button type="submit" class="btn btn-accent">
            <i class="fas fa-check-circle"></i>
            Créer le livret d'accueil
          </button>
        </div>
      </div>
    </form>

    <!-- Success Message -->
    <div class="success-message" id="successMessage">
      <div class="success-icon">
        <i class="fas fa-check"></i>
      </div>
      <h2>Livret d'accueil créé avec succès !</h2>
      <p>Votre livret d'accueil personnalisé a été généré.</p>
      <div style="display: flex; gap: 1rem; justify-content: center;">
        <button class="btn btn-primary" onclick="viewWelcomeBook()">
          <i class="fas fa-eye"></i>
          Voir le livret
        </button>
        <button class="btn btn-secondary" onclick="createAnother()">
          <i class="fas fa-plus"></i>
          Créer un autre livret
        </button>
      </div>
    </div>
  </div>

  <script>
    let currentSection = 1;
    const totalSections = 5;
    let roomCounter = 0;
    let restaurantCounter = 0;
    let placeCounter = 0;

    // Navigation entre sections
    function nextSection() {
      if (currentSection < totalSections) {
        // Masquer la section actuelle
        document.querySelector(`.form-section[data-section="${currentSection}"]`).classList.remove('active');
        
        // Marquer l'étape comme complétée
        document.querySelector(`.step[data-step="${currentSection}"]`).classList.add('completed');
        document.querySelector(`.step[data-step="${currentSection}"]`).classList.remove('active');
        
        currentSection++;
        
        // Afficher la nouvelle section
        document.querySelector(`.form-section[data-section="${currentSection}"]`).classList.add('active');
        document.querySelector(`.step[data-step="${currentSection}"]`).classList.add('active');
        
        // Scroll to top
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
    }

    function prevSection() {
      if (currentSection > 1) {
        // Masquer la section actuelle
        document.querySelector(`.form-section[data-section="${currentSection}"]`).classList.remove('active');
        document.querySelector(`.step[data-step="${currentSection}"]`).classList.remove('active');
        
        currentSection--;
        
        // Afficher la section précédente
        document.querySelector(`.form-section[data-section="${currentSection}"]`).classList.add('active');
        document.querySelector(`.step[data-step="${currentSection}"]`).classList.add('active');
        
        // Retirer le statut completed de la section actuelle
        document.querySelector(`.step[data-step="${currentSection}"]`).classList.remove('completed');
        
        // Scroll to top
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
    }

    // Gestion des images
    function setupImageUpload(inputId, previewId) {
      const input = document.getElementById(inputId);
      const preview = document.getElementById(previewId);
      
      input.addEventListener('change', function(e) {
        const files = Array.from(e.target.files);
        
        files.forEach((file, index) => {
          const reader = new FileReader();
          
          reader.onload = function(event) {
            const div = document.createElement('div');
            div.className = 'image-preview-item';
            div.innerHTML = `
              <img src="${event.target.result}" alt="Preview">
              <button type="button" class="remove-btn" onclick="this.parentElement.remove()">
                <i class="fas fa-times"></i>
              </button>
            `;
            preview.appendChild(div);
          };
          
          reader.readAsDataURL(file);
        });
      });
    }

    // Setup image uploads
    setupImageUpload('coverPhoto', 'coverPhotoPreview');
    setupImageUpload('entrancePhotos', 'entrancePhotosPreview');
    setupImageUpload('parkingPhotos', 'parkingPhotosPreview');

    // Ajouter une pièce
    function addRoom() {
      roomCounter++;
      const container = document.getElementById('roomsContainer');
      const roomHtml = `
        <div class="repeatable-item" id="room-${roomCounter}">
          <div class="repeatable-item-header">
            <div class="repeatable-item-title">
              <i class="fas fa-door-closed"></i>
              Pièce ${roomCounter}
            </div>
            <button type="button" class="remove-item-btn" onclick="removeItem('room-${roomCounter}')">
              <i class="fas fa-trash"></i>
            </button>
          </div>
          
          <div class="form-group">
            <label>Nom de la pièce</label>
            <input type="text" class="form-control" name="room[${roomCounter}][name]" placeholder="Ex: Chambre, Salon, Cuisine, Terrasse...">
          </div>
          
          <div class="form-group">
            <label>Description</label>
            <textarea class="form-control" name="room[${roomCounter}][description]" rows="3" placeholder="Ex: 1 lit 140×200 • Linge de lit fourni • Serviettes"></textarea>
          </div>
          
          <div class="form-group">
            <label>Photo(s) de cette pièce</label>
            <div class="image-upload-area" onclick="document.getElementById('roomPhotos-${roomCounter}').click()">
              <i class="fas fa-camera"></i>
              <p>Cliquez pour télécharger des photos</p>
            </div>
            <input type="file" id="roomPhotos-${roomCounter}" accept="image/*" multiple style="display: none;">
            <div class="image-preview" id="roomPhotosPreview-${roomCounter}"></div>
          </div>
        </div>
      `;
      container.insertAdjacentHTML('beforeend', roomHtml);
      setupImageUpload(`roomPhotos-${roomCounter}`, `roomPhotosPreview-${roomCounter}`);
    }

    // Ajouter un restaurant
    function addRestaurant() {
      restaurantCounter++;
      const container = document.getElementById('restaurantsContainer');
      const restaurantHtml = `
        <div class="repeatable-item" id="restaurant-${restaurantCounter}">
          <div class="repeatable-item-header">
            <div class="repeatable-item-title">
              <i class="fas fa-utensils"></i>
              Restaurant ${restaurantCounter}
            </div>
            <button type="button" class="remove-item-btn" onclick="removeItem('restaurant-${restaurantCounter}')">
              <i class="fas fa-trash"></i>
            </button>
          </div>
          
          <div class="form-grid">
            <div class="form-group">
              <label>Nom du restaurant</label>
              <input type="text" class="form-control" name="restaurant[${restaurantCounter}][name]" placeholder="Ex: LA MAISON">
            </div>
            
            <div class="form-group">
              <label>Téléphone</label>
              <input type="tel" class="form-control" name="restaurant[${restaurantCounter}][phone]" placeholder="01 XX XX XX XX">
            </div>
          </div>
          
          <div class="form-group">
            <label>Adresse</label>
            <input type="text" class="form-control" name="restaurant[${restaurantCounter}][address]" placeholder="8 rue Carnot">
          </div>
          
          <div class="form-group">
            <label>Description</label>
            <textarea class="form-control" name="restaurant[${restaurantCounter}][description]" rows="3" placeholder="Bistrot déco originale. Saumon fumé, Tataki de bœuf..."></textarea>
          </div>
        </div>
      `;
      container.insertAdjacentHTML('beforeend', restaurantHtml);
    }

    // Ajouter un lieu à visiter
    function addPlace() {
      placeCounter++;
      const container = document.getElementById('placesContainer');
      const placeHtml = `
        <div class="repeatable-item" id="place-${placeCounter}">
          <div class="repeatable-item-header">
            <div class="repeatable-item-title">
              <i class="fas fa-map-marker-alt"></i>
              Lieu ${placeCounter}
            </div>
            <button type="button" class="remove-item-btn" onclick="removeItem('place-${placeCounter}')">
              <i class="fas fa-trash"></i>
            </button>
          </div>
          
          <div class="form-group">
            <label>Nom du lieu</label>
            <input type="text" class="form-control" name="place[${placeCounter}][name]" placeholder="Ex: Musée Jean-Jacques Rousseau">
          </div>
          
          <div class="form-group">
            <label>Description</label>
            <textarea class="form-control" name="place[${placeCounter}][description]" rows="2" placeholder="Joli petit musée retraçant une partie de sa vie"></textarea>
          </div>
          
          <div class="form-group">
            <label>Photo</label>
            <div class="image-upload-area" onclick="document.getElementById('placePhoto-${placeCounter}').click()">
              <i class="fas fa-image"></i>
              <p>Cliquez pour télécharger une photo</p>
            </div>
            <input type="file" id="placePhoto-${placeCounter}" accept="image/*" style="display: none;">
            <div class="image-preview" id="placePhotoPreview-${placeCounter}"></div>
          </div>
        </div>
      `;
      container.insertAdjacentHTML('beforeend', placeHtml);
      setupImageUpload(`placePhoto-${placeCounter}`, `placePhotoPreview-${placeCounter}`);
    }

    // Supprimer un item
    function removeItem(itemId) {
      if (confirm('Êtes-vous sûr de vouloir supprimer cet élément ?')) {
        document.getElementById(itemId).remove();
      }
    }

    // Initialiser avec quelques éléments par défaut
    window.addEventListener('DOMContentLoaded', function() {
      addRoom();
      addRestaurant();
      addPlace();
    });

    // Soumission du formulaire
    document.getElementById('welcomeForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      // Ici vous pouvez ajouter la logique pour envoyer les données au backend
      console.log('Formulaire soumis');
      
      // Masquer le formulaire
      document.getElementById('welcomeForm').style.display = 'none';
      document.querySelector('.progress-steps').style.display = 'none';
      
      // Afficher le message de succès
      document.getElementById('successMessage').classList.add('show');
      
      // Scroll to top
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    // Actions après création
    function viewWelcomeBook() {
      // Rediriger vers le livret créé
      alert('Redirection vers le livret d\'accueil...');
    }

    function createAnother() {
      // Réinitialiser le formulaire
      location.reload();
    }
  </script>
</script>
// Fonction pour collecter toutes les données du formulaire
function collectFormData() {
  const formData = new FormData();
  
  // Section 1: Informations générales
  formData.append('propertyName', document.querySelector('[name="propertyName"]').value);
  formData.append('welcomeDescription', document.querySelector('[name="welcomeDescription"]').value);
  formData.append('contactPhone', document.querySelector('[name="contactPhone"]').value);
  
  // Photo de couverture
  const coverPhotoInput = document.getElementById('coverPhoto');
  if (coverPhotoInput.files[0]) {
    formData.append('coverPhoto', coverPhotoInput.files[0]);
  }
  
  // Section 2: Accès & Arrivée
  formData.append('address', document.querySelector('[name="address"]').value);
  formData.append('postalCode', document.querySelector('[name="postalCode"]').value);
  formData.append('city', document.querySelector('[name="city"]').value);
  formData.append('keyboxCode', document.querySelector('[name="keyboxCode"]').value);
  formData.append('accessInstructions', document.querySelector('[name="accessInstructions"]').value);
  formData.append('parkingInfo', document.querySelector('[name="parkingInfo"]').value);
  
  // Photos d'entrée
  const entrancePhotosInput = document.getElementById('entrancePhotos');
  if (entrancePhotosInput.files) {
    Array.from(entrancePhotosInput.files).forEach(file => {
      formData.append('entrancePhotos', file);
    });
  }
  
  // Photos de parking
  const parkingPhotosInput = document.getElementById('parkingPhotos');
  if (parkingPhotosInput.files) {
    Array.from(parkingPhotosInput.files).forEach(file => {
      formData.append('parkingPhotos', file);
    });
  }
  
  // Section 3: Pièces
  const rooms = [];
  document.querySelectorAll('[id^="room-"]').forEach((roomElement, index) => {
    const roomId = roomElement.id;
    const room = {
      name: roomElement.querySelector(`[name="room[${index + 1}][name]"]`)?.value || '',
      description: roomElement.querySelector(`[name="room[${index + 1}][description]"]`)?.value || ''
    };
    rooms.push(room);
    
    // Photos de la pièce
    const roomPhotosInput = document.getElementById(`roomPhotos-${index + 1}`);
    if (roomPhotosInput && roomPhotosInput.files) {
      Array.from(roomPhotosInput.files).forEach(file => {
        formData.append(`roomPhotos`, file);
      });
    }
  });
  formData.append('rooms', JSON.stringify(rooms));
  
  // Section 4: Informations pratiques
  formData.append('wifiSSID', document.querySelector('[name="wifiSSID"]').value);
  formData.append('wifiPassword', document.querySelector('[name="wifiPassword"]').value);
  formData.append('checkoutTime', document.querySelector('[name="checkoutTime"]').value);
  formData.append('checkoutInstructions', document.querySelector('[name="checkoutInstructions"]').value);
  formData.append('equipmentList', document.querySelector('[name="equipmentList"]').value);
  formData.append('importantRules', document.querySelector('[name="importantRules"]').value);
  formData.append('transportInfo', document.querySelector('[name="transportInfo"]').value);
  
  // Section 5: Aux alentours
  const restaurants = [];
  document.querySelectorAll('[id^="restaurant-"]').forEach((restaurantElement, index) => {
    const restaurant = {
      name: restaurantElement.querySelector(`[name="restaurant[${index + 1}][name]"]`)?.value || '',
      phone: restaurantElement.querySelector(`[name="restaurant[${index + 1}][phone]"]`)?.value || '',
      address: restaurantElement.querySelector(`[name="restaurant[${index + 1}][address]"]`)?.value || '',
      description: restaurantElement.querySelector(`[name="restaurant[${index + 1}][description]"]`)?.value || ''
    };
    restaurants.push(restaurant);
  });
  formData.append('restaurants', JSON.stringify(restaurants));
  
  formData.append('shopsList', document.querySelector('[name="shopsList"]').value);
  
  const places = [];
  document.querySelectorAll('[id^="place-"]').forEach((placeElement, index) => {
    const place = {
      name: placeElement.querySelector(`[name="place[${index + 1}][name]"]`)?.value || '',
      description: placeElement.querySelector(`[name="place[${index + 1}][description]"]`)?.value || ''
    };
    places.push(place);
    
    // Photo du lieu
    const placePhotoInput = document.getElementById(`placePhoto-${index + 1}`);
    if (placePhotoInput && placePhotoInput.files[0]) {
      formData.append(`placePhotos`, placePhotoInput.files[0]);
    }
  });
  formData.append('places', JSON.stringify(places));
  
  return formData;
}

// Modifier la soumission du formulaire
document.getElementById('welcomeForm').addEventListener('submit', async function(e) {
  e.preventDefault();
  
  // Afficher un loader
  const submitButton = document.querySelector('button[type="submit"]');
  const originalButtonText = submitButton.innerHTML;
  submitButton.disabled = true;
  submitButton.innerHTML = '<div class="spinner"></div> Création en cours...';
  
  try {
    const formData = collectFormData();
    
    // Envoyer au backend
    const response = await fetch('/api/welcome-books/create', {
      method: 'POST',
      body: formData,
      credentials: 'include' // Important pour envoyer les cookies d'authentification
    });
    
    const result = await response.json();
    
    if (result.success) {
      // Masquer le formulaire
      document.getElementById('welcomeForm').style.display = 'none';
      document.querySelector('.progress-steps').style.display = 'none';
      
      // Stocker l'URL du livret
      window.welcomeBookUrl = result.url;
      window.welcomeBookUniqueId = result.uniqueId;
      
      // Afficher le message de succès
      document.getElementById('successMessage').classList.add('show');
      
      // Scroll to top
      window.scrollTo({ top: 0, behavior: 'smooth' });
    } else {
      throw new Error(result.error || 'Erreur lors de la création du livret');
    }
    
  } catch (error) {
    console.error('Erreur:', error);
    alert('Une erreur est survenue lors de la création du livret d\'accueil. Veuillez réessayer.');
    
    // Restaurer le bouton
    submitButton.disabled = false;
    submitButton.innerHTML = originalButtonText;
  }
});

// Actions après création
function viewWelcomeBook() {
  if (window.welcomeBookUrl) {
    window.open(window.welcomeBookUrl, '_blank');
  } else {
    alert('URL du livret non disponible');
  }
}

function createAnother() {
  // Réinitialiser le formulaire
  location.reload();
}

// Ajouter un bouton pour copier le lien
document.querySelector('.success-message .btn-primary').insertAdjacentHTML('afterend', `
  <button class="btn btn-secondary" onclick="copyWelcomeBookLink()">
    <i class="fas fa-copy"></i>
    Copier le lien
  </button>
`);

function copyWelcomeBookLink() {
  if (window.welcomeBookUrl) {
    navigator.clipboard.writeText(window.welcomeBookUrl).then(() => {
      const button = event.target.closest('button');
      const originalHTML = button.innerHTML;
      button.innerHTML = '<i class="fas fa-check"></i> Lien copié !';
      button.style.background = '#10B981';
      
      setTimeout(() => {
        button.innerHTML = originalHTML;
        button.style.background = '';
      }, 2000);
    }).catch(err => {
      console.error('Erreur lors de la copie:', err);
      prompt('Copiez ce lien:', window.welcomeBookUrl);
    });
  }
}
  </script>
</body>
</html>
