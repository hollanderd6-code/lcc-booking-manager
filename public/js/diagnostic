// DIAGNOSTIC CALENDRIER - Copiez ce code dans la console (F12)
// pour diagnostiquer le problÃ¨me

console.log('=== DIAGNOSTIC CALENDRIER ===');

// 1. VÃ©rifier que le JavaScript est chargÃ©
console.log('1. JavaScript chargÃ©:', typeof state !== 'undefined' ? 'âœ… OUI' : 'âŒ NON');

// 2. VÃ©rifier l'Ã©tat de l'application
if (typeof state !== 'undefined') {
  console.log('2. Ã‰tat de l\'application:');
  console.log('   - Bookings:', state.bookings ? state.bookings.length + ' rÃ©servations' : 'âŒ undefined');
  console.log('   - Properties:', state.properties ? state.properties.length + ' logements' : 'âŒ undefined');
  console.log('   - Selected booking:', state.selectedBooking || 'aucune');
} else {
  console.log('2. âŒ Variable "state" non dÃ©finie - Le JavaScript ne s\'est pas chargÃ© correctement');
}

// 3. VÃ©rifier les Ã©lÃ©ments du DOM
console.log('3. Ã‰lÃ©ments du DOM:');
console.log('   - Modal dÃ©tails:', document.getElementById('reservationDetailsModal') ? 'âœ… existe' : 'âŒ manquant');
console.log('   - Modal Ã©dition:', document.getElementById('editBookingModal') ? 'âœ… existe' : 'âŒ manquant');
console.log('   - Calendrier:', document.getElementById('calendarGrid') ? 'âœ… existe' : 'âŒ manquant');

// 4. VÃ©rifier les rÃ©servations dans le DOM
const bookingBlocks = document.querySelectorAll('.booking-block');
console.log('4. RÃ©servations affichÃ©es:', bookingBlocks.length + ' blocs dans le DOM');

// 5. Tester un clic sur une rÃ©servation
if (bookingBlocks.length > 0) {
  console.log('5. Test de clic sur la premiÃ¨re rÃ©servation...');
  console.log('   - ID du bloc:', bookingBlocks[0].dataset.bookingId);
  console.log('   - Classe:', bookingBlocks[0].className);
  console.log('   - Texte:', bookingBlocks[0].textContent);
  
  // VÃ©rifier si un event listener est attachÃ©
  console.log('   - onclick:', bookingBlocks[0].onclick ? 'âœ… dÃ©fini' : 'âŒ undefined');
} else {
  console.log('5. âŒ Aucune rÃ©servation Ã  tester');
}

// 6. VÃ©rifier les fonctions
console.log('6. Fonctions disponibles:');
console.log('   - showBookingDetails:', typeof showBookingDetails !== 'undefined' ? 'âœ… dÃ©finie' : 'âŒ undefined');
console.log('   - loadBookings:', typeof loadBookings !== 'undefined' ? 'âœ… dÃ©finie' : 'âŒ undefined');
console.log('   - openEditBookingModal:', typeof openEditBookingModal !== 'undefined' ? 'âœ… dÃ©finie' : 'âŒ undefined');

// 7. VÃ©rifier l'URL de l'API
if (typeof CONFIG !== 'undefined') {
  console.log('7. Configuration API:');
  console.log('   - URL:', CONFIG.API_URL);
} else {
  console.log('7. âŒ CONFIG non dÃ©finie');
}

// 8. Test manuel - simuler un clic
if (bookingBlocks.length > 0 && typeof state !== 'undefined') {
  console.log('\n8. ğŸ§ª TEST: Simulation d\'un clic...');
  try {
    const firstBooking = state.bookings[0];
    if (firstBooking) {
      console.log('   DonnÃ©es de la premiÃ¨re rÃ©servation:');
      console.log('   ', firstBooking);
      console.log('   Tentative d\'ouverture du modal...');
      // Ne pas vraiment ouvrir pour ne pas polluer l'Ã©cran
      console.log('   âœ… Les donnÃ©es existent');
    } else {
      console.log('   âŒ Aucune rÃ©servation dans state.bookings');
    }
  } catch (error) {
    console.log('   âŒ Erreur:', error.message);
  }
}

console.log('\n=== FIN DU DIAGNOSTIC ===\n');
console.log('ğŸ“‹ Copiez tous ces rÃ©sultats et envoyez-les pour analyse.');
